(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{40:function(e,t,n){},41:function(e,t,n){},69:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(34),s=n.n(c),o=(n(40),n(8)),i=n(9),u=n(11),j=n(10),l=(n.p,n(41),n(13)),h=n.n(l),d=n(25),b=n(0),p=function(e){var t=e.user;return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:t.username}),Object(b.jsx)("td",{children:t.email}),Object(b.jsx)("td",{children:t.first_name}),Object(b.jsx)("td",{children:t.last_name})]})},O=function(e){var t=e.users;return Object(b.jsxs)("table",{children:[Object(b.jsx)("th",{children:" User name "}),Object(b.jsx)("th",{children:" Email "}),Object(b.jsx)("th",{children:" First name "}),Object(b.jsx)("th",{children:" Last name "}),t.map((function(e){return Object(b.jsx)(p,{user:e})}))]})},f=n(16),x=n(4),m=n(14),v=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).state={name:""},r}return Object(i.a)(n,[{key:"handleChange",value:function(e){this.setState(Object(m.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){this.props.filterProject(this.state.name),e.preventDefault()}},{key:"render",value:function(){var e=this;return Object(b.jsx)("div",{children:Object(b.jsxs)("form",{onSubmit:function(t){return e.handleSubmit(t)},children:[Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{htmlFor:"name",children:"name"}),Object(b.jsx)("input",{type:"text",className:"form-control",name:"name",value:this.state.name,onChange:function(t){return e.handleChange(t)}})]}),Object(b.jsx)("input",{type:"submit",value:"Filter"})]})})}}]),n}(a.a.Component),g=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).state={name:"",user:[],repo_link:""},r}return Object(i.a)(n,[{key:"handleChange",value:function(e){this.setState(Object(m.a)({},e.target.name,e.target.value))}},{key:"handleProjectChange",value:function(e){if(e.target.selectedOptions){for(var t=[],n=0;n<e.target.selectedOptions.length;n++)t.push(e.target.selectedOptions.item(n).value);this.setState({user:t})}else this.setState({user:[]})}},{key:"handleSubmit",value:function(e){this.props.createProject(this.state.name,this.state.user,this.state.repo_link),e.preventDefault()}},{key:"render",value:function(){var e=this;return Object(b.jsxs)("form",{onSubmit:function(t){return e.handleSubmit(t)},children:[Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{htmlFor:"login",children:"name"}),Object(b.jsx)("input",{type:"text",className:"form-control",name:"name",value:this.state.name,onChange:function(t){return e.handleChange(t)}})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{htmlFor:"user",children:"user"}),Object(b.jsx)("select",{name:"user",multiple:!0,onChange:function(t){return e.handleProjectChange(t)},children:this.props.users.map((function(e){return Object(b.jsx)("option",{value:e.id,children:e.username})}))})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{htmlFor:"repo_link",children:"link"}),Object(b.jsx)("input",{type:"text",className:"form-control",name:"repo_link",value:this.state.repo_link,onChange:function(t){return e.handleChange(t)}})]}),Object(b.jsx)("input",{type:"submit",value:"Save"})]})}}]),n}(a.a.Component),k=function(e){var t=e.users,n=e.project,r=e.deleteProject;return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:Object(b.jsxs)(x.b,{to:{pathname:"/project/".concat(n.id)},children:[" ",n.name," "]})}),Object(b.jsx)("td",{children:n.user.map((function(e){return t.find((function(t){return t.id==e})).username}))}),Object(b.jsx)("td",{children:n.repo_link}),Object(b.jsx)("td",{children:Object(b.jsx)("button",{onClick:function(){return r(n.id)},type:"button",children:"Delete"})}),Object(b.jsx)("td",{children:Object(b.jsx)(x.b,{to:{pathname:"/projects/update/".concat(n.id)},children:"Update"})})]})},_=function(e){var t=e.users,n=e.projects,r=e.deleteProject;return Object(b.jsxs)("div",{children:[Object(b.jsxs)("table",{children:[Object(b.jsx)("th",{children:" Project name"}),Object(b.jsx)("th",{children:" User"}),Object(b.jsx)("th",{children:" Link"}),Object(b.jsx)("th",{}),n.map((function(e){return Object(b.jsx)(k,{users:t,project:e,deleteProject:r})}))]}),Object(b.jsx)(x.b,{to:"/projects/create",children:"Create"})]})},C=function(e){var t=e.users,n=e.projects,r=e.deleteProject,a=e.filterProject;return Object(b.jsxs)("div",{children:[Object(b.jsx)(v,{filterProject:function(e){return a(e)}}),Object(b.jsx)(_,{users:t,projects:n,deleteProject:r})]})},y=function(e){var t=e.users,n=e.projects,r=e.todo,a=e.deleteTodo;return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:r.caption}),Object(b.jsx)("td",{children:r.text}),Object(b.jsx)("td",{children:n.find((function(e){return e.id==r.project})).name}),Object(b.jsx)("td",{children:r.created}),Object(b.jsx)("td",{children:r.updated}),Object(b.jsx)("td",{children:t.find((function(e){return e.id==r.author})).username}),Object(b.jsx)("td",{children:r.state}),Object(b.jsx)("td",{children:"CLS"!==r.state&&Object(b.jsx)("button",{onClick:function(){return a(r.id)},type:"button",children:"Delete"})})]})},S=function(e){var t=e.users,n=e.projects,r=e.todos,a=e.deleteTodo;return Object(b.jsxs)("div",{children:[Object(b.jsxs)("table",{children:[Object(b.jsx)("th",{children:" Caption"}),Object(b.jsx)("th",{children:" Text"}),Object(b.jsx)("th",{children:" Project"}),Object(b.jsx)("th",{children:" Creation date"}),Object(b.jsx)("th",{children:" Last update"}),Object(b.jsx)("th",{children:" Author"}),Object(b.jsx)("th",{children:" State"}),Object(b.jsx)("th",{}),r.map((function(e){return Object(b.jsx)(y,{users:t,projects:n,todo:e,deleteTodo:a})}))]}),Object(b.jsx)(x.b,{to:"/todos/create",children:"Create"})]})},P=function(e){return Object(f.a)(e),Object(b.jsx)("ul",{children:Object(b.jsx)("li",{children:"\u0412\u0441\u0435 \u043f\u0440\u0430\u0432\u0430 \u0437\u0430\u0449\u0438\u0449\u0435\u043d\u044b"})})},T=n(2),N=function(e){return Object(f.a)(e),Object(b.jsx)("div",{children:Object(b.jsx)("h2",{children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"})})},F=function(e){var t=e.users,n=e.projects,r=e.todos,a=e.deleteTodo,c=Object(T.g)().id,s=r.filter((function(e){return e.project==c}));return Object(b.jsxs)("table",{children:[Object(b.jsx)("th",{children:" Caption"}),Object(b.jsx)("th",{children:" Text"}),Object(b.jsx)("th",{children:" Project"}),Object(b.jsx)("th",{children:" Creation date"}),Object(b.jsx)("th",{children:" Last update"}),Object(b.jsx)("th",{children:" Author"}),Object(b.jsx)("th",{children:" State"}),s.map((function(e){return Object(b.jsx)(y,{users:t,projects:n,todo:e,deleteTodo:a})}))]})},w=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).state={login:"",password:""},r}return Object(i.a)(n,[{key:"handleChange",value:function(e){this.setState(Object(m.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){this.props.get_auth_data(this.state.login,this.state.password),e.preventDefault()}},{key:"render",value:function(){var e=this;return Object(b.jsxs)("form",{onSubmit:function(t){return e.handleSubmit(t)},method:"post",children:[Object(b.jsx)("input",{type:"text",name:"login",placeholder:"login",value:this.state.login,onChange:function(t){return e.handleChange(t)}}),Object(b.jsx)("input",{type:"password",name:"password",placeholder:"password",value:this.state.password,onChange:function(t){return e.handleChange(t)}}),Object(b.jsx)("input",{type:"submit",value:"Login"})]})}}]),n}(a.a.Component),D=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).state={caption:"",author:e.users[0].id,text:"",project:e.projects[0].id},r}return Object(i.a)(n,[{key:"handleChange",value:function(e){this.setState(Object(m.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){this.props.createTodo(this.state.caption,this.state.text,this.state.author,this.state.project),e.preventDefault()}},{key:"render",value:function(){var e=this;return Object(b.jsxs)("form",{onSubmit:function(t){return e.handleSubmit(t)},children:[Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{htmlFor:"caption",children:"caption"}),Object(b.jsx)("input",{type:"text",className:"form-control",name:"caption",value:this.state.caption,onChange:function(t){return e.handleChange(t)}})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{htmlFor:"text",children:"text"}),Object(b.jsx)("input",{type:"text",className:"form-control",name:"text",value:this.state.text,onChange:function(t){return e.handleChange(t)}})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{htmlFor:"author",children:"author"}),Object(b.jsx)("select",{name:"author",onChange:function(t){return e.handleChange(t)},children:this.props.users.map((function(e){return Object(b.jsx)("option",{value:e.id,children:e.username})}))})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{htmlFor:"project",children:"project"}),Object(b.jsx)("select",{name:"project",onChange:function(t){return e.handleChange(t)},children:this.props.projects.map((function(e){return Object(b.jsx)("option",{value:e.id,children:e.name})}))})]}),Object(b.jsx)("input",{type:"submit",value:"Save"})]})}}]),n}(a.a.Component),L=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(e){var r;Object(o.a)(this,n),r=t.call(this,e);var a=e.projects.filter((function(t){return t.id==e.id.match.params.id}));return r.state={id:a[0].id,name:a[0].name,user:a[0].user,repo_link:a[0].repo_link},r}return Object(i.a)(n,[{key:"handleChange",value:function(e){this.setState(Object(m.a)({},e.target.name,e.target.value))}},{key:"handleProjectChange",value:function(e){if(e.target.selectedOptions){for(var t=[],n=0;n<e.target.selectedOptions.length;n++)t.push(e.target.selectedOptions.item(n).value);this.setState({user:t})}else this.setState({user:[]})}},{key:"handleSubmit",value:function(e){this.props.updateProject(this.state.name,this.state.user,this.state.repo_link,this.state.id),e.preventDefault()}},{key:"render",value:function(){var e=this;return Object(b.jsxs)("form",{onSubmit:function(t){return e.handleSubmit(t)},children:[Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{htmlFor:"login",children:"name"}),Object(b.jsx)("input",{type:"text",className:"form-control",name:"name",value:this.state.name,onChange:function(t){return e.handleChange(t)}})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{htmlFor:"user",children:"user"}),Object(b.jsx)("select",{name:"user",multiple:!0,onChange:function(t){return e.handleProjectChange(t)},children:this.props.users.map((function(t){return Object(b.jsx)("option",{value:t.id,selected:e.state.user.includes(t.id),children:t.username})}))})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{htmlFor:"repo_link",children:"link"}),Object(b.jsx)("input",{type:"text",className:"form-control",name:"repo_link",value:this.state.repo_link,onChange:function(t){return e.handleChange(t)}})]}),Object(b.jsx)("input",{type:"submit",value:"Save"})]})}}]),n}(a.a.Component),A=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).state={users:[],projects:[],todos:[],token:"",user_name:""},r}return Object(i.a)(n,[{key:"set_auth_data",value:function(e,t){var n=this,r=new d.a;r.set("token",e),r.set("user_name",t),this.setState({token:e,user_name:t},(function(){return n.load_data()}))}},{key:"is_auth",value:function(e){return!!this.state.token}},{key:"logout",value:function(){this.set_auth_data("","")}},{key:"get_auth_data_from_storage",value:function(){var e=this,t=new d.a,n=t.get("token"),r=t.get("user_name");this.setState({token:n,user_name:r},(function(){return e.load_data()}))}},{key:"get_auth_data",value:function(e,t){var n=this;h.a.post("http://127.0.0.1:8000/api-token-auth/",{username:e,password:t}).then((function(t){n.set_auth_data(t.data.token,e)})).catch((function(e){return alert("\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c")}))}},{key:"get_headers",value:function(){var e={"Content-Type":"application/json"};return this.is_auth()&&(e.Authorization="Token "+this.state.token),e}},{key:"componentDidMount",value:function(){this.get_auth_data_from_storage()}},{key:"createProject",value:function(e,t,n){var r=this,a=this.get_headers(),c={name:e,user:t,repo_link:n};h.a.post("http://127.0.0.1:8000/api/projects/",c,{headers:a}).then((function(e){r.load_data()})).catch((function(e){alert("\u041e\u0448\u0438\u0431\u043a\u0430! \u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u0440\u043e\u0435\u043a\u0442."),console.log(e)}))}},{key:"filterProject",value:function(e){var t=this,n=this.get_headers();h.a.get("http://127.0.0.1:8000/api/projects/?name=".concat(e),{headers:n}).then((function(e){t.setState({projects:e.data})})).catch((function(e){return console.log(e)}))}},{key:"updateProject",value:function(e,t,n,r){var a=this,c=this.get_headers(),s={name:e,user:t,repo_link:n};h.a.put("http://127.0.0.1:8000/api/projects/".concat(r,"/"),s,{headers:c}).then((function(e){a.load_data()})).catch((function(e){alert("\u041e\u0448\u0438\u0431\u043a\u0430! \u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0440\u043e\u0435\u043a\u0442."),console.log(e)}))}},{key:"createTodo",value:function(e,t,n,r){var a=this,c=this.get_headers(),s={caption:e,text:t,author:n,project:r};h.a.post("http://127.0.0.1:8000/api/todos/",s,{headers:c}).then((function(e){a.load_data()})).catch((function(e){alert("\u041e\u0448\u0438\u0431\u043a\u0430! \u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u0437\u0430\u0434\u0430\u0447\u0443."),console.log(e)}))}},{key:"deleteProject",value:function(e){var t=this,n=this.get_headers();h.a.delete("http://127.0.0.1:8000/api/projects/".concat(e,"/"),{headers:n}).then((function(e){t.load_data()})).catch((function(e){alert("\u041e\u0448\u0438\u0431\u043a\u0430! \u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u0440\u043e\u0435\u043a\u0442."),console.log(e)}))}},{key:"deleteTodo",value:function(e){var t=this,n=this.get_headers();h.a.delete("http://127.0.0.1:8000/api/todos/".concat(e,"/"),{headers:n}).then((function(e){t.load_data()})).catch((function(e){alert("\u041e\u0448\u0438\u0431\u043a\u0430! \u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0437\u0430\u0434\u0430\u0447\u0443."),console.log(e)}))}},{key:"load_data",value:function(){var e=this,t=this.get_headers();h.a.get("http://127.0.0.1:8000/api/users/",{headers:t}).then((function(t){var n=t.data;e.setState({users:n})})).catch((function(t){console.log(t),e.setState({users:[]})})),h.a.get("http://127.0.0.1:8000/api/projects/",{headers:t}).then((function(t){var n=t.data;e.setState({projects:n})})).catch((function(t){console.log(t),e.setState({projects:[]})})),h.a.get("http://127.0.0.1:8000/api/todos/",{headers:t}).then((function(t){var n=t.data;e.setState({todos:n})})).catch((function(t){console.log(t),e.setState({todos:[]})}))}},{key:"render",value:function(){var e=this;return Object(b.jsxs)("div",{children:[Object(b.jsxs)(x.a,{children:[Object(b.jsxs)("ul",{children:[Object(b.jsx)("li",{children:Object(b.jsx)(x.b,{to:"/",children:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438"})}),Object(b.jsx)("li",{children:Object(b.jsx)(x.b,{to:"/projects",children:"\u041f\u0440\u043e\u0435\u043a\u0442\u044b"})}),Object(b.jsx)("li",{children:Object(b.jsx)(x.b,{to:"/todos",children:"\u0417\u0430\u0434\u0430\u0447\u0438"})}),Object(b.jsx)("li",{children:this.is_auth()?Object(b.jsxs)("p",{children:[this.state.user_name,Object(b.jsx)("button",{onClick:function(){return e.logout()},children:"\u0412\u044b\u0445\u043e\u0434"})]}):Object(b.jsx)(x.b,{to:"/login",children:"\u0412\u0445\u043e\u0434"})})]}),Object(b.jsxs)(T.d,{children:[Object(b.jsx)(T.b,{exact:!0,path:"/",component:function(){return Object(b.jsx)(O,{users:e.state.users})}}),Object(b.jsx)(T.b,{exact:!0,path:"/projects/create",component:function(){return Object(b.jsx)(g,{users:e.state.users,createProject:function(t,n,r){return e.createProject(t,n,r)}})}}),Object(b.jsx)(T.b,{exact:!0,path:"/projects/update/:id",component:function(t){return Object(b.jsx)(L,{users:e.state.users,projects:e.state.projects,id:t,updateProject:function(t,n,r,a){return e.updateProject(t,n,r,a)}})}}),Object(b.jsx)(T.b,{exact:!0,path:"/projects",component:function(){return Object(b.jsx)(C,{users:e.state.users,projects:e.state.projects,deleteProject:function(t){return e.deleteProject(t)},filterProject:function(t){return e.filterProject(t)}})}}),Object(b.jsx)(T.b,{exact:!0,path:"/todos/create",component:function(){return Object(b.jsx)(D,{users:e.state.users,projects:e.state.projects,createTodo:function(t,n,r,a){return e.createTodo(t,n,r,a)}})}}),Object(b.jsx)(T.b,{exact:!0,path:"/todos",component:function(){return Object(b.jsx)(S,{users:e.state.users,projects:e.state.projects,todos:e.state.todos,deleteTodo:function(t){return e.deleteTodo(t)}})}}),Object(b.jsx)(T.b,{exact:!0,path:"/login",component:function(){return Object(b.jsx)(w,{get_auth_data:function(t,n){return e.get_auth_data(t,n)}})}}),Object(b.jsx)(T.b,{path:"/project/:id",children:Object(b.jsx)(F,{users:this.state.users,projects:this.state.projects,todos:this.state.todos,deleteTodo:function(t){return e.deleteTodo(t)}})}),Object(b.jsx)(T.a,{to:"/",from:"/users"}),Object(b.jsx)(T.b,{component:N})]})]}),Object(b.jsx)(P,{})]})}}]),n}(a.a.Component),U=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,70)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))};s.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(A,{})}),document.getElementById("root")),U()}},[[69,1,2]]]);
//# sourceMappingURL=main.e26be6e1.chunk.js.map